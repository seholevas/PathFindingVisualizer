{"ast":null,"code":"import { getValueByElementId } from \"../helpers/functions/get-value-by-element-id\";\nimport store from \"../redux/stores/store\";\nimport dijkstra from \"../algorithms/dijkstra\";\nimport { changeNodeToVisited, changeNodeToShortestPath } from \"../helpers/state-functions/update-node-state\";\nimport { dispatchedChangedNodeType } from \"../redux/dispatchs/grid-dispatchs\";\nimport { sleep } from \"../helpers/async-functions/sleep\";\nimport { dispatchedStartedSearch, dispatchedStoppedSearch } from \"../redux/dispatchs/settings-dispatchs\";\nimport { breadthFirstSearch } from \"./breadth-first-search\";\nimport depthFirstSearch from \"./depth-first-search\";\nimport aStar from \"./a-star\";\nimport flicker from \"../helpers/dom-helpers/flicker\";\n\nfunction getAlgorithm(array = [[]], type = \"mergesort\", start_coordinates, end_coordinates, additional_destinations, walls, weights) {\n  let copy_add_dest = Object.assign({}, additional_destinations);\n\n  if (type === \"a*\") {\n    return aStar(array, start_coordinates, end_coordinates, copy_add_dest, walls, weights);\n  } else if (type === \"bfs\") {\n    return breadthFirstSearch(array, start_coordinates, end_coordinates, additional_destinations, walls);\n  } else if (type === \"dfs\") {\n    return depthFirstSearch(array, start_coordinates, end_coordinates, additional_destinations, walls, weights);\n  } else if (type === \"dijkstra\") {\n    return dijkstra(array, start_coordinates, end_coordinates, additional_destinations, walls, weights);\n  } // else if (type === \"insertionsort\") {\n  //     return InsertionSort(array);\n  // }\n  // else if (type === \"quicksort\") {\n  //     return QuickSort(array, 0, array.length - 1);\n  // }\n  // else if (type === \"cocktailsort\") {\n  // }\n\n}\n\nexport default async function startPathFinding() {\n  var array = store.getState().grid;\n  let playing = store.getState().settings;\n  let start_coordinates = store.getState().nodes.start_coordinates;\n  let end_coordinates = store.getState().nodes.end_coordinates;\n  let weights = store.getState().nodes.weight_coordinates;\n  let walls = store.getState().nodes.wall_coordinates;\n  let additional_destinations = store.getState().nodes.additional_destination_coordinates;\n\n  if (playing) {\n    return;\n  }\n\n  dispatchedStartedSearch();\n  playing = await store.getState().settings; // console.log(\"playing: \", playing);\n  // console.log(\"grid: \", array);\n\n  const pathFindingType = getValueByElementId(\"algorithms\");\n  const generator = getAlgorithm(array, pathFindingType, start_coordinates, end_coordinates, additional_destinations, walls, weights);\n  let visited_nodes = generator.next().value;\n  let shortest_path_nodes = generator.next().value;\n  var i = 0;\n\n  while (playing && i < visited_nodes.length) {\n    let copy_matrix = changeNodeToVisited(visited_nodes[i], array);\n    dispatchedChangedNodeType(copy_matrix);\n    await flicker(visited_nodes[i]);\n    playing = await store.getState().settings;\n    i++;\n    await sleep(500 / getValueByElementId(\"speed\"));\n  }\n\n  array = await store.getState().grid;\n  i = 0;\n\n  if (shortest_path_nodes === undefined) {\n    alert(\"There is no path to the end desination!\");\n    return;\n  }\n\n  while (playing && i < shortest_path_nodes.length) {\n    let copy_matrix = changeNodeToShortestPath(shortest_path_nodes[i], array);\n    dispatchedChangedNodeType(copy_matrix);\n    await flicker(shortest_path_nodes[i]);\n    playing = await store.getState().settings;\n    i++;\n    await sleep(1000 / getValueByElementId(\"speed\"));\n  }\n\n  dispatchedStoppedSearch(); // // && playing\n  // while (!result.done && playing) {\n  //     let value = result.value\n  //     console.log(\"value: \", value)\n  //     let shallow_matrix = updateNodeState(value, array);\n  //     dispatchedChangedNodeType(shallow_matrix);\n  //     result = generator.next();\n  //     playing = store.getState().settings\n  //     await sleep(1000 / getValueByElementId(\"speed\"));\n  // }\n  // dispatchedStoppedSearch();\n}","map":{"version":3,"sources":["/home/steven/SWE/Code/path-finding-visualizer/src/algorithms/pathfind.js"],"names":["getValueByElementId","store","dijkstra","changeNodeToVisited","changeNodeToShortestPath","dispatchedChangedNodeType","sleep","dispatchedStartedSearch","dispatchedStoppedSearch","breadthFirstSearch","depthFirstSearch","aStar","flicker","getAlgorithm","array","type","start_coordinates","end_coordinates","additional_destinations","walls","weights","copy_add_dest","Object","assign","startPathFinding","getState","grid","playing","settings","nodes","weight_coordinates","wall_coordinates","additional_destination_coordinates","pathFindingType","generator","visited_nodes","next","value","shortest_path_nodes","i","length","copy_matrix","undefined","alert"],"mappings":"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","sourcesContent":["import { getValueByElementId } from \"../helpers/functions/get-value-by-element-id\";\nimport store from \"../redux/stores/store\"\nimport dijkstra from \"../algorithms/dijkstra\"\nimport { changeNodeToVisited, changeNodeToShortestPath } from \"../helpers/state-functions/update-node-state\";\nimport { dispatchedChangedNodeType } from \"../redux/dispatchs/grid-dispatchs\";\nimport { sleep } from \"../helpers/async-functions/sleep\";\nimport { dispatchedStartedSearch, dispatchedStoppedSearch } from \"../redux/dispatchs/settings-dispatchs\";\nimport { breadthFirstSearch } from \"./breadth-first-search\";\nimport depthFirstSearch from \"./depth-first-search\";\nimport aStar from \"./a-star\";\nimport flicker from \"../helpers/dom-helpers/flicker\";\n\nfunction getAlgorithm(array = [[]], type = \"mergesort\", start_coordinates, end_coordinates, additional_destinations, walls, weights) {\n    let copy_add_dest = Object.assign({}, additional_destinations);\n\n\n    if (type === \"a*\") {\n        return aStar(array, start_coordinates, end_coordinates, copy_add_dest, walls, weights);\n    }\n    else if (type === \"bfs\") {\n        return breadthFirstSearch(array, start_coordinates, end_coordinates, additional_destinations, walls);\n    }\n    else if (type === \"dfs\") {\n        return depthFirstSearch(array, start_coordinates, end_coordinates, additional_destinations, walls, weights);\n    }\n    else if (type === \"dijkstra\") {\n        return dijkstra(array, start_coordinates, end_coordinates, additional_destinations, walls, weights);\n    }\n    // else if (type === \"insertionsort\") {\n    //     return InsertionSort(array);\n    // }\n    // else if (type === \"quicksort\") {\n    //     return QuickSort(array, 0, array.length - 1);\n    // }\n    // else if (type === \"cocktailsort\") {\n\n    // }\n}\n\nexport default async function startPathFinding() {\n    var array = store.getState().grid;\n    let playing = store.getState().settings;\n    let start_coordinates = store.getState().nodes.start_coordinates;\n    let end_coordinates = store.getState().nodes.end_coordinates;\n    let weights = store.getState().nodes.weight_coordinates;\n    let walls = store.getState().nodes.wall_coordinates;\n    let additional_destinations = store.getState().nodes.additional_destination_coordinates;\n\n    if (playing) {\n        return;\n    }\n\n    dispatchedStartedSearch();\n    playing = await store.getState().settings;\n\n    // console.log(\"playing: \", playing);\n    // console.log(\"grid: \", array);\n\n\n    const pathFindingType = getValueByElementId(\"algorithms\");\n    const generator = getAlgorithm(array, pathFindingType, start_coordinates, end_coordinates, additional_destinations, walls, weights);\n\n    let visited_nodes = generator.next().value;\n\n    let shortest_path_nodes = generator.next().value;\n\n\n    var i = 0;\n    while (playing && i < visited_nodes.length) {\n        \n        let copy_matrix = changeNodeToVisited(visited_nodes[i], array);\n        dispatchedChangedNodeType(copy_matrix);\n        await flicker(visited_nodes[i]);\n        playing = await store.getState().settings;\n        i++;\n        await sleep(500 / getValueByElementId(\"speed\"));\n\n    }\n\n    array = await store.getState().grid;\n    i = 0;\n    if(shortest_path_nodes === undefined)\n    {\n        alert(\"There is no path to the end desination!\")\n        return;\n    }\n\n    while (playing && i < shortest_path_nodes.length) {\n\n        let copy_matrix = changeNodeToShortestPath(shortest_path_nodes[i], array);\n        dispatchedChangedNodeType(copy_matrix);\n        await flicker(shortest_path_nodes[i])\n        playing = await store.getState().settings;\n        i++;\n        await sleep(1000 / getValueByElementId(\"speed\"));\n\n    }\n    dispatchedStoppedSearch();\n\n    // // && playing\n    // while (!result.done && playing) {\n\n    //     let value = result.value\n    //     console.log(\"value: \", value)\n    //     let shallow_matrix = updateNodeState(value, array);\n    //     dispatchedChangedNodeType(shallow_matrix);\n    //     result = generator.next();\n    //     playing = store.getState().settings\n    //     await sleep(1000 / getValueByElementId(\"speed\"));\n    // }\n    // dispatchedStoppedSearch();\n}"]},"metadata":{},"sourceType":"module"}